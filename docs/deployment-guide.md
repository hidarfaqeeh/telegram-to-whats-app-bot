# 🚀 دليل تشغيل ونشر البوت

## 📋 المتطلبات الأساسية

### 1. متطلبات النظام
- **Node.js** (الإصدار 18 أو أحدث)
- **npm** أو **yarn** لإدارة الحزم
- **Git** لتحميل الكود
- **Chrome/Chromium** (للواتساب)

### 2. الحسابات المطلوبة
- **حساب تلقرام** مع بوت API
- **رقم واتساب** منفصل للبوت
- **حساب Vercel** (للنشر)
- **حساب Supabase** (لقاعدة البيانات)

## 🔧 إعداد البيئة المحلية

### الخطوة 1: تحميل المشروع
\`\`\`bash
# استنساخ المشروع
git clone https://github.com/your-username/telegram-whatsapp-bot.git
cd telegram-whatsapp-bot

# تثبيت المكتبات
npm install
\`\`\`

### الخطوة 2: إعداد متغيرات البيئة
\`\`\`bash
# إنشاء ملف البيئة
cp .env.example .env.local

# تحرير الملف وإضافة القيم
nano .env.local
\`\`\`

### الخطوة 3: إعداد قاعدة البيانات
\`\`\`bash
# تشغيل سكريبت إعداد قاعدة البيانات
npm run setup-db
\`\`\`

## 🤖 إنشاء بوت تلقرام

### 1. إنشاء البوت
1. ابحث عن `@BotFather` في تلقرام
2. أرسل `/newbot`
3. اختر اسم للبوت
4. احصل على `BOT_TOKEN`

### 2. إعداد القناة
1. أنشئ قناة تلقرام
2. أضف البوت كمشرف
3. احصل على معرف القناة

## 📱 إعداد واتساب

### 1. تحضير الرقم
- استخدم رقم واتساب منفصل
- يُفضل واتساب بيزنس
- تأكد من استقرار الإنترنت

### 2. المتطلبات التقنية
- Chrome/Chromium مثبت
- ذاكرة كافية (2GB+)
- معالج قوي للمحاكاة

## 🚀 تشغيل البوت

### التشغيل المحلي
\`\`\`bash
# تشغيل في وضع التطوير
npm run dev

# أو تشغيل الإنتاج
npm run build
npm start
\`\`\`

### التشغيل كخدمة (Linux)
\`\`\`bash
# إنشاء ملف الخدمة
sudo nano /etc/systemd/system/telegram-whatsapp-bot.service
\`\`\`

## 🌐 النشر على Vercel

### 1. ربط المشروع
\`\`\`bash
# تثبيت Vercel CLI
npm i -g vercel

# تسجيل الدخول
vercel login

# نشر المشروع
vercel --prod
\`\`\`

### 2. إعداد متغيرات البيئة
\`\`\`bash
# إضافة متغيرات البيئة
vercel env add TELEGRAM_BOT_TOKEN
vercel env add TELEGRAM_CHANNEL_ID
vercel env add SUPABASE_URL
vercel env add SUPABASE_ANON_KEY
\`\`\`

## 🔍 مراقبة البوت

### 1. السجلات
\`\`\`bash
# عرض السجلات المباشرة
vercel logs --follow

# أو محلياً
npm run logs
\`\`\`

### 2. الصحة العامة
- تحقق من `/api/health`
- مراقبة استخدام الذاكرة
- تتبع معدل الأخطاء

## ⚠️ استكشاف الأخطاء

### مشاكل شائعة وحلولها
1. **فشل اتصال واتساب**
   - تحقق من Chrome
   - أعد تشغيل البوت
   - امسح بيانات الجلسة

2. **عدم استقبال رسائل تلقرام**
   - تحقق من صحة التوكن
   - تأكد من إضافة البوت للقناة
   - فحص الشبكة

3. **مشاكل قاعدة البيانات**
   - تحقق من اتصال Supabase
   - فحص صحة الجداول
   - مراجعة الصلاحيات
